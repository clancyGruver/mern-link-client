{"version":3,"sources":["hooks/http.hook.js","context/auth.context.js","components/Loader.js","components/LinksList.js","pages/Links.page.js","components/LinkCard.js","pages/Detail.page.js","pages/Create.page.js","pages/Auth.page.js","hooks/message.hook.js","hooks/auth.hook.js","components/Navbar.js","App.js","routes.js","reportWebVitals.js","index.js"],"names":["useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","noop","AuthContext","createContext","token","userId","logIn","logOut","isAuthenticate","Loader","style","display","justifyContent","paddingTop","className","LinksList","links","length","map","link","idx","from","to","_id","LinksPage","setLinks","useContext","fetchedLinks","Authorization","fetched","useEffect","LinkCard","href","target","rel","clickCount","Date","date","toLocaleDateString","DetailPage","setLink","linkId","useParams","id","getLink","CreatePage","auth","history","useHistory","pressKeyHandler","e","key","push","window","M","updateTextFields","placeholder","name","type","value","onChange","onKeyPress","htmlFor","AuthPage","text","toast","html","email","password","form","setForm","changeHandler","event","registerHandler","console","log","loginHandler","onClick","disabled","storageName","Navbar","padding","preventDefault","App","setToken","ready","setReady","setUserId","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a6d926a8.chunk.js","sourcesContent":["import { useState, useCallback } from 'react';\n\nexport const useHttp = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const request = useCallback(async (url, method='GET', body=null, headers={}) => {\n    setLoading(true);\n    try {\n      if (body) {\n        body = JSON.stringify(body);\n        headers['Content-type'] = 'application/json';\n      }\n\n      const response = await fetch (url, {\n        method,\n        body,\n        headers\n      })\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Что-то пошло не так');\n      }\n\n      setLoading(false);\n      return data;\n\n    } catch (error) {\n      setLoading(false);\n      setError(error.message);\n      throw error;\n    }\n  }, []);\n\n  const clearError = useCallback(() => setError(null), []);\n\n  return { loading, request, error, clearError };\n}","import { createContext } from 'react';\n\nfunction noop() {};\n\nexport const AuthContext = createContext({\n  token: null,\n  userId: null,\n  logIn: noop,\n  logOut: noop,\n  isAuthenticate: false,\n});","import React from 'react';\n\nexport const Loader = () => {\n  return (\n    <div style={{display: 'flex', justifyContent: 'center', paddingTop: '2rem'}}>\n      <div className=\"preloader-wrapper active\">\n        <div className=\"spinner-layer spinner-red-only\">\n          <div className=\"circle-clipper left\">\n            <div className=\"circle\"></div>\n          </div><div className=\"gap-patch\">\n            <div className=\"circle\"></div>\n          </div><div className=\"circle-clipper right\">\n            <div className=\"circle\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport const LinksList = ({ links }) => {\n  if (links.length === 0) {\n    return (\n      <p className=\"center\">Ссылок пока нет</p>\n    )\n  }\n  return(\n    <table>\n      <thead>\n        <tr>\n            <th>№</th>\n            <th>Оригинальная</th>\n            <th>Сокращенная</th>\n            <th>Открыть</th>\n        </tr>\n      </thead>\n\n      <tbody>\n      { links.map((link, idx) => (\n        <tr key={link._id}>\n          <td>{idx + 1}</td>\n          <td>{link.from}</td>\n          <td>{link.to}</td>\n          <td><Link to={`/detail/${link._id}`}>Открыть</Link></td>\n        </tr>\n      )) }\n      </tbody>\n    </table>\n  );\n}","import React, { useCallback, useContext, useState, useEffect } from 'react';\nimport { useHttp } from '../hooks/http.hook';\nimport { AuthContext } from '../context/auth.context';\nimport { Loader } from '../components/Loader';\nimport { LinksList } from '../components/LinksList';\n\n\nexport const LinksPage = () => {\n\n  const [links, setLinks] = useState([]);\n  const { loading, request } = useHttp();\n  const { token } = useContext(AuthContext);\n\n  const fetchedLinks = useCallback(async () => {\n    try {\n      const fetched = await request('/api/link', 'GET', null, {\n        Authorization: `Bearer ${token}`,\n      })\n      setLinks(fetched);\n    } catch (error) {\n      \n    }\n  }, [token, request]);\n\n  useEffect(() => {\n    fetchedLinks();\n  }, [fetchedLinks]);\n\n  if (loading) {\n    return (<Loader />)\n  }\n\n  return (\n    <>\n      { !loading && links && <LinksList links={links}/> }\n    </>\n  );\n}","import React from 'react';\n\nexport const LinkCard = ({ link }) => {\n  return(\n    <>\n      <h2>Ссылка</h2>\n      <p>Ваша ссылка: <a href={link.to} target=\"_blank\" rel=\"noopener noreferrer\">{link.to}</a></p>\n      <p>Откуда: <a href={link.from} target=\"_blank\" rel=\"noopener noreferrer\">{link.from}</a></p>\n      <p>Количество кликов: <strong>{link.clickCount}</strong></p>\n      <p>Дата создания: <strong>{ new Date(link.date).toLocaleDateString() }</strong></p>\n    </>\n  );\n}","import React, { useEffect, useContext, useState, useCallback } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useHttp } from '../hooks/http.hook';\nimport { AuthContext } from '../context/auth.context';\nimport { Loader } from '../components/Loader';\nimport { LinkCard } from '../components/LinkCard';\n\nexport const DetailPage = () => {\n  const { token } = useContext(AuthContext);\n  const [link, setLink] = useState(null);\n  const linkId = useParams().id;\n  const { request, loading } = useHttp();\n\n  const getLink = useCallback(async () => {\n    try {\n      const fetched = await request(`/api/link/${linkId}`, 'GET', null, {\n        Authorization: `Bearer ${token}`,\n      });\n      setLink(fetched);\n    } catch (error) {\n      \n    }\n  }, [token, linkId, request]);\n\n  useEffect(() => {\n    getLink();\n  }, [getLink]);\n\n  if (loading) {\n    return (<Loader />)\n  }\n\n  return (\n    <>\n      { !loading && link && <LinkCard link={link}/> }\n    </>\n  );\n}","import React, { useContext, useState, useEffect } from 'react';\nimport { useHttp } from '../hooks/http.hook';\nimport { AuthContext } from '../context/auth.context';\nimport { useHistory } from 'react-router-dom';\n\nexport const CreatePage = () => {\n  const auth = useContext(AuthContext);\n  const history = useHistory();\n  const [link, setLink] = useState('');\n  const { request } = useHttp();\n  const pressKeyHandler = async e => {\n    if(e.key === 'Enter') {\n      try {\n        const data = await request('/api/link/generate', 'POST', {from: link}, {\n          Authorization: `Bearer ${auth.token}`,\n        });\n        history.push(`/detail/${data.link._id}`);\n      } catch (error) {\n        \n      }\n    }\n  }\n\n  useEffect(() => {\n    window.M.updateTextFields();\n  }, []);\n\n  return (\n    <div className=\"row\">\n      <div className=\"col s8 offset-s2\" style={{paddingTop: '2rem',}}>\n\n        <div className=\"input-field\">\n          <input \n            placeholder=\"вставьте ссылку\"\n            id=\"link\"\n            name=\"link\"\n            type=\"text\"\n            value={link}\n            onChange={e => setLink(e.target.value)}\n            onKeyPress={pressKeyHandler}\n          />\n          <label htmlFor=\"link\">Введите ссылку</label>\n        </div>\n\n      </div>\n    </div>\n  );\n}","import React, { useContext, useState, useEffect } from 'react';\nimport { useHttp } from '../hooks/http.hook';\nimport { useMessage } from '../hooks/message.hook';\nimport { AuthContext } from '../context/auth.context';\n\nexport const AuthPage = () => {\n  const auth = useContext(AuthContext);\n  const message = useMessage();\n  const {loading, error, request, clearError} = useHttp();\n  const [form, setForm] = useState({\n    email: '',\n    password: '',\n  });\n\n  useEffect(() => {\n    message(error);\n    clearError();\n  }, [error, message, clearError]);\n\n  useEffect(() => {\n    window.M.updateTextFields();\n  }, []);\n\n  const changeHandler = (event) => {\n    setForm({ ...form, [event.target.name]: event.target.value });\n  }\n\n  const registerHandler = async () => {\n    try {\n      const data = await request(\n        '/api/auth/register',\n        'POST',\n        {\n          ...form\n        });\n        message(data.message);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const loginHandler = async () => {\n    try {\n      const data = await request(\n        '/api/auth/login',\n        'POST',\n        {\n          ...form\n        });\n      console.log(data);\n      auth.logIn(data.token, data.userId);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <div className=\"row\">\n      <div className=\"col s-6 offset-s3\">\n        <h1>Сократи ссылку</h1>\n        <div className=\"card blue darken-1\">\n          <div className=\"card-content white-text\">\n            <span className=\"card-title\">Авторизация</span>\n            <div>\n\n              <div className=\"input-field\">\n                <input \n                  placeholder=\"введите email\"\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"text\"\n                  className=\"yellow-input\"\n                  value={form.email}\n                  onChange={changeHandler}\n                />\n                <label htmlFor=\"email\">Email</label>\n              </div>\n\n              <div className=\"input-field\">\n                <input \n                  placeholder=\"введите пароль\"\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  className=\"yellow-input\"\n                  value={form.password}\n                  onChange={changeHandler}\n                />\n                <label htmlFor=\"password\">Пароль</label>\n              </div>\n\n            </div>\n          </div>\n          <div className=\"card-action\">\n            <button\n              className=\"btn yellow darken-4\"\n              onClick={loginHandler}\n              disabled={ loading }\n            >\n              Войти\n            </button>\n            <button\n              className=\"btn grey lighten-1 black-text\"\n              onClick={registerHandler}\n              disabled={ loading }\n            >\n              Регистрация\n            </button>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n","import { useCallback } from 'react';\n\nexport const useMessage = () => {\n  return useCallback(text => {\n    if (window.M && text) {\n      window.M.toast({html: text});\n    }\n  }, []);\n};","import { useState, useCallback, useEffect } from 'react';\n\nconst storageName = 'userData';\n\nexport const useAuth = () => {\n  const [token, setToken] = useState(null);\n  const [ready, setReady] = useState(false);\n  const [userId, setUserId] = useState(null);\n\n  const logIn = useCallback((jwtToken, id) => {\n    setToken(jwtToken);\n    setUserId(id);\n\n    localStorage.setItem(storageName, JSON.stringify({\n      userId: id,\n      token: jwtToken,\n    }));\n  }, []);\n\n  const logOut = useCallback(() => {\n    setToken(null);\n    setUserId(null);\n\n    localStorage.removeItem(storageName);\n  }, []);\n\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(storageName));\n    if (data && data.token) {\n      logIn(data.token, data.userId);\n    }\n    setReady(true);\n  }, [logIn]);\n\n  return { logIn, logOut, token, userId, ready };\n\n}","import React, { useContext } from 'react';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { AuthContext } from '../context/auth.context';\n\nexport const Navbar = () => {\n  const auth = useContext(AuthContext);\n  const history = useHistory();\n  const logOutHandler = event => {\n    event.preventDefault();\n    auth.logOut();\n    history.push('/');\n  };\n\n  return (\n    <nav>\n      <div className=\"nav-wrapper blue darken-1\" style={{padding: '0 2rem',}}>\n        <span className=\"brand-logo\">Сокращение ссылок</span>\n        <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\n          <li><NavLink to=\"/create\">Создать</NavLink></li>\n          <li><NavLink to=\"/links\">Ссылки</NavLink></li>\n          <li><a href=\"/\" onClick={logOutHandler}>Выйти</a></li>\n        </ul>\n      </div>\n    </nav>\n  )\n}","import React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { useRoutes } from './routes';\nimport { useAuth } from './hooks/auth.hook';\nimport { AuthContext } from './context/auth.context';\nimport { Navbar } from './components/Navbar';\nimport { Loader } from './components/Loader';\n\nimport 'materialize-css';\n\nfunction App() {\n  const { userId, token, logIn, logOut, ready, } = useAuth();\n  const isAuthenticate = !!token;\n  const routes = useRoutes(isAuthenticate);\n\n  if (!ready) {\n    return <Loader />\n  }\n\n  return (\n    <AuthContext.Provider value={{token, logIn, logOut, userId, isAuthenticate}}>\n      <Router>\n        { isAuthenticate && <Navbar /> }\n        <div className=\"container\">\n          {routes}\n        </div>\n      </Router>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { Redirect, Switch, Route } from 'react-router-dom';\nimport { LinksPage } from './pages/Links.page';\nimport { DetailPage } from './pages/Detail.page';\nimport { CreatePage } from './pages/Create.page';\nimport { AuthPage } from './pages/Auth.page';\n\nexport const useRoutes = isAuthenticated => {\n  if (isAuthenticated) {\n    return (\n      <Switch>\n        <Route path=\"/links\" exact>\n          <LinksPage />\n        </Route>\n        <Route path=\"/create\" exact>\n          <CreatePage />\n        </Route>\n        <Route path=\"/detail/:id\">\n          <DetailPage />\n        </Route>\n        <Redirect to=\"/create\" />\n      </Switch>\n    );\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/\" exact>\n        <AuthPage />\n      </Route>\n      <Redirect to=\"/\"/>\n    </Switch>\n  );\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}